name: AI Orchestrator

on:
  schedule:
    - cron: "*/15 * * * *" # JP: 15分おき / EN: every 15 min
  workflow_dispatch: {}

permissions:
  contents: write
  pull-requests: write
  issues: write
  id-token: write

concurrency:
  group: ai-orchestrator-${{ github.repository }}
  cancel-in-progress: false

jobs:
  call:
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write
    uses: mizunotaro/ai-playbook/.github/workflows/reuse-ai-orchestrator.yml@fix/prompt-output-delimiter
    with:
      # Align to your OpenCode GitHub install selection:
      # Provider: Z.AI Coding Plan, Model: GLM-4.7
      model: "zai-coding-plan/glm-4.7"
    secrets:
      # Either name works; reusable workflow normalizes it.
      ZAI_API_KEY: ${{ secrets.ZAI_API_KEY }}
      ZHIPU_API_KEY: ${{ secrets.ZHIPU_API_KEY }}

